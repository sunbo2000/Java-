# 1. 因特网

## 1. 概述

### 1.1 什么是网络

节点(node)和边(link)构成的与大小形状无关的拓扑。
网络与大小、形状无关。

### 1.2 计算机网络

由联网的计算机构成的网络

- 节点

  - 主机(端系统)节点□: 手机、ipad、web服务器

  - 数据交换(中转)节点○: 中继器、路由器、交换机

    数据交换节点既不是源也不是目标，他是中转节点，如路由器节点，起到一个中转作用。

- 边 : 计算机链路,把节点连接在一起的称之为链路
  - 接入网链路: 主机连接到互联网的链路(方框之间的连接)
  - 主干链路: 路由器间的链路(圆之间的连接)

节点：主机（端系统，联网的设备）、应用程序
边：光纤、无线电、电缆

### 1.3 互联网

#### 1.3.1 internet 和 Internet

internet: (互联网或互连网)是一个通用名词,泛指由多个计算机网络互连而成的网络.在这些网络之间的通信协议可以是任意的

Internet: 因特网是一个专用名词,它指当前全球最大的,开放的,由众多网络相互连接而成的特定计算机网络,它采用TCP/IP协议作为通信的规则.

<img src="D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709164452050.png" alt="image-20220709164452050" style="zoom:80%;" />

- 以 TCP/IP 为主的网络，是大多数人一起使用的网络, 称之为互联网（Internet）
- Internet标准：互联网上所有的标准都是以 RFC 文档格式在 IETF 上发布
- 协议：支撑了互联网的工作标准，是对等层之间在通信过程相互遵守的规范，称之为协议，其中遵守的有语法、语义、时序、动作

### 1.4 什么是协议

为了完成某一工作，要求两个（或多个）通信实体运行相同的协议

- 人类协议与计算机网络协议

  ![img](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\70.png)

# 2. 网络边缘,核心,接入

1. 网络边缘：

   由所有连接在因特网的主机组成，是用户**直接使用的，用来通信和资源共享的设备**。

   -  主机

   -  应用程序（客户端和服务器）

2.  网络核心：

   由**大量网络和连接这些网络的路由器组成**，这部分是为边缘服务提供服务的。

   - 互连着的路由器

   -  网络的网络

3. 接入网、物理媒体：

   -  有线或者无线通信链路

# 3.交换方式

## 3.1 电路交换(Circuit Switching)

1. 两台设备互相连接,缺点是当设备数量多时需要线路太多

<img src="D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709170643614.png" alt="image-20220709170643614" style="zoom: 67%;" />

2. 电话交换机

   1. 引入电话交换机大大减少了连接线路的数量

   <img src="D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709170849916.png" alt="image-20220709170849916" style="zoom:50%;" />

   - 电话交换机接通电话线的方式称为电路交换;
   - 从通信资源的分配角度来看，交换(Switching) 就是按照某种方式动态地分配传输线路的资源;

3. 电路交换的三个步骤

   1. 建立连接(分配通信资源) : 从主叫端到被叫端之间建立一条连接,一条专用的物理通路,保证了双方那个通话是所需的通信资源,这些资源在通信是不会被其他用户占用
   2. 通话(一直占用通信资源):
   3. 释放资源(归还通信资源) 

   特点: 在建立后不论通信资源有没有使用，都不会进行中断，除非用户中断。

<img src="D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709171535262.png" alt="image-20220709171535262" style="zoom: 67%;" />

4. 电路交换传送计算机数据?

   当使用电路交换传送计算机数据时,其线路的传输效率往往很低

   因为器特性 ,在建立后不论通信资源有没有使用，都不会进行中断，除非用户中断, 会导致很大一部分通信资源被浪费

## 3.2 分组交换(Packet Switching)

把整块数据/信息分为多个数据段（相对于报文传输而言），数据段分开传输。在数据段前面加上首部后，成为一个分组。以分组为单位传输。

![image-20220709173117506](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709173117506.png)

主机H2在收到分组后,去掉它们的首部,将各个数据段组合还原成原始的报文

1. 发送方: 构造分组,发送分组
2. 路由器(分组交换机) :缓存分组,转发分组即存储转发
3. 接收方: 接收分组,还原报文

- 分组过程中不同分组可以走不同路径

- 分组乱序,分组到达目的站的顺序不一定与分组在源站的顺序相同

## 3.3 报文交换,电路交换,分组交换的对比

![image-20220709174739320](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709174739320.png)

#### 电路交换

优点：

1. 通信时延小，适合传输大量数据

2. 有序传输，只在一条固定线路传输，不会失序

3. 没有冲突，只在一条线路传输，不会引发冲突

4. 适用范围广，适合模拟信号和数字信号
5. 实时性强

6. 控制简单，结构简单，易于控制

缺点：

1. 建立连接时间长

2. 线路独占，使用效率低

3. 灵活性差

4. 难以规格化

#### 报文交换

优点:

1. 无需建立连接，可以随时发送报文

1. 动态分配线路

2. 提高线路可靠性，若线路故障会选择正常线路
3. 提高线路利用率
4. 提供多目标服务，一个报文可以同时发送给多个地址


缺点：

1. 引发了转发时延，在节点中转发储存时间花费多
2. 需要较大储存缓存空间
3. 需要传输额外的信息量，报文中有源地址点多余信息


#### 分组交换

优点：

1. 无需建立连接

2. 线路利用率高

3. 简化了储存管理，分组长度固定，缓冲区固定，易于管理

4. 加速传输，节点的转发和缓存同时进行，提高速度

5. 减少出错概率和重发数据量


缺点：

1. 引发了转发时延

2. 需要传输额外的信息量，分组中有源地址等额外信息量

3. 对于数据报服务，处在失序、丢失货重复分组的问题

4. 对于虚电路服务，存在呼叫建立、数据传输和虚电路释放三个过程

# 4.计算机网络的定义

计算机网络的精确定义未统一

计算机网络最简单的定义是: 一些相互连接的,	自治的计算机的集合.

- 互连 指的是计算机之间可以通过有限或无线的方式进行数据通信
- 自治 的意思是独立的计算机,有自己的软硬件,可以独立使用
- 集合 至少需要两台计算机

比较全面的定义

计算机网络主要是一些**通用的、可编程的硬件互连而成**的，而硬件并非专门用来实现某一特定目的的，这些可编程的硬件能够用来**传送多种不同类型的数据**（如音频、数据），这些可编程的软件能支持**广泛和日益增长的应用**。

# 5.计算机网络的分类

## 1. 按技术分类

电路交换网络

报文交换网络

分组交换网络

## 2. 按使用者分类

公用网: 电信公司构建的大型网络，**面对公众开放**，只要交钱既可使用，又叫公众网。

专用网 :某个部门为本单位的特殊业务工作需要而建造的网络。例如铁路部门、电信部门**专门为自己构建的，不对外开放**的网络。

## 3. 按传输介质分类

有线网: 双绞线(日常使用网线)、光纤。

无线网: 主要是WIFI。

## 4. 按覆盖范围分类

广域网WAN: **覆盖面积通常为几十公里到几千公里，可以覆盖国家范围、洲际范围**，有时也成为远程网。负责互连分布在不同区域的城域网和局域网，是最大范围的网络。

城域网MAN: 覆盖**范围一般是一个城市**。作用距离为5到50公里。通常作为城市骨干网，互连大量企业、机构、学校。

区域网LAN: 局域网一般是微型计算机或工作站通过高速线路相连，**范围一般是一个实验室、一栋楼或一个校园**。通常由某个单位单独拥有、使用和维护。

个域网PAN: 个人区域网络。非用来连接普通计算机，在个人工作的地方把个人使用的电子设备，鼠标、键盘、耳机等用无线的方式连接起来形成的个人网络系统。	

## 5. 按拓扑结构分

1. 总线型网络: 总线型网络用**单根传输线**把计算机连接起来。

   ![image-20220709190124195](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709190124195.png)

   - 优点: **建网容易，增减节点方便，节省线路**。

   - 缺点: **重负载时通信效率不高，任意一处出现故障后全网瘫痪**。

2. 星型网络: 将每个计算机都以单独的线路与中央设备相连。中央设备现在一般是交换机。

   ![image-20220709190144574](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709190144574.png)

   - 优点：便于网络的**集中控制和管理**。
   - 缺点：**成本高，中央设备对故障敏感**。

3. 环形结构: 环形网络是将所有计算机网络接口连接成一个环。环可以是单环或者双环，环中信号是单项传输的。

   ![image-20220709190208310](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709190208310.png)

4. 网状型结构: 在网状结构中，每个节点至少由两条路径与其他节点相连接，多用在广域网中。

   ![image-20220709190242031](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709190242031.png)

   - 优点：**可靠性高**。

   - 缺点：**控制复杂，线路成本高**。

**在以上四种结构中可以组合任意的更加复杂有效的结构。**

# 6. 计算机网络的性能指标

## 1.常用的性能指标

1. 速率
2. 带宽
3. 吞吐量
4. 时延
5. 时延带宽积
6. 往返时间
7. 利用率
8. 丢包率

## 速率

![image-20220709220657224](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709220657224.png)

## 带宽(理想)

1. 带宽在计算机网络中的意义

   用来表示网络的通信线路所能传送数据的能力，因此网络带宽表示在单位时间内从网络中的某一点到另一点所能通过的“**最高数据率**”；

2. 单位: b/s  Kb/s Mb/s Gb/s Tb/s

## 吞吐量(现实)

1. 表示**单位时间内通过某个网络(或信道,接口)的数据量**
2. 吞吐量被经常用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据 量能够通过网络。
3. 吞吐量**受网络的带宽或额定速率的限制**

## 时延

1. 发送时延: 源主机将分组发往传输线路,需要花费一定时间
2. 传播时延: 分组信号在链路上传输,也需要一定 时间
3. 处理时延: 路由器接收到分组后对其进行存储转发这也需要一定的时间

<img src="D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709223132850.png" alt="image-20220709223132850" style="zoom: 80%;" />

### 发送时延的计算

1. 分组长度(b) / 发送速率(b/s)

   发送速率: 木桶理论

![image-20220709223333446](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220709223333446.png)

### 传播时延计算公式

信道长度(m) / 电磁波传播速率(m/s)

自由空间:      3 * 10^8 m/s

铜        线:  2.3 * 10^8 m/s

光        纤:  2.0 * 10^8 m/s

光纤信道的传输速率高是指可以用很高的速率向光纤信道发送数据，不是传播速率

![image-20220710093732440](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710093732440.png)

## 时延带宽积 = 传播时延 * 带宽

![image-20220710094100111](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710094100111.png)

## 往返时间

![image-20220710105705706](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710105705706.png)

## 利用率

1. 信道利用率

   表示某信道有百分之几是被利用的(有数据通过)

   根据排队论，当某信道的利用率增大时，该信道引起的时延也会迅速增加;
   因此，**信道利用率并非越高越好**;

   ![image-20220710110359142](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710110359142.png)

2. 网络利用率

   全网络的利用率的加权平均

   ## 丢包率

# 7. 计算机网络体系结构

1. 常见的计算机网络体系结构 
2. 计算机网络体系结构分层的必要性 
3. 计算机网络体系结构分层思想举例
4. 计算机网络体系结构中的专用术语

## 1.常见的计算机网络体系结构

国际化标准组织研究发布的"开放系统互连参考模型"即 OSI

但因特网已经大量覆盖在全球,因特网采用的四层 TCP/IP 体系结构

![image-20220710111932850](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710111932850.png)

### OSI 体系结构和 TCP/IP 体系结构对比

<img src="D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710123709254.png" alt="image-20220710123709254" style="zoom:67%;" />

教学时把 TCP/IP 体系结构的网络接口层分成了数据链路层和物理层

### TCP/IP协议各层解析

![image-20220710153833260](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710153833260.png)

1. IP 协议为 TCP/IP 体系结构中的核心协议
   - 负责互连不同的网络接口( IP over everything)
   - 为各种网络应用提供服务(Everything Over IP)
2. TCP/IP 体系结构为了将不同网络结构互连,网络接口层并没有规定具体内容

## 2. 计算机网络体系结构分层的必要性 

- "分层"可将庞大而复杂的问题，转化为若干较小的局部问题，而这些较小的局部问题就比较易于研究和处理。

### 物理层问题

![img](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\webp.webp)

- 说明

  - 第一，严格来说，传输媒体并不属于物理层

  - 计算机传输的信号，并不是图示的方波信号

  这样举例只是让初学者容易理解

### 数据链路层问题

![img](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\webp-16574427889142.webp)



### 网络层问题

![img](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\webp-16574428546526.webp)

- IP 地址的前三个十进制数表示网络,最后一个十进制数表示主机
- 175.178.189.**89**  175.178.189.**90** 175.178.189.**91**

### 运输层问题

![img](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\webp-16574428938098.webp)

### 应用层问题

![img](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\webp-165744292891310.webp)

### 原理体系结构

![image-20220710165202943](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710165202943.png)

#### 网络层的主要任务

- **实现网络互连，进而实现数据包在网络之间的传输**

#### 数据链路层的主要任务

- **将数据报通过单一通信链路从一个节点移动到相邻节点**

#### 物理层的主要任务

- **在连接各种计算机传输媒体上传输数据比特流**

### 各层作用范围

![image-20220710194141711](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710194141711.png)

## 3. 计算机网络体系结构分层思想举例

## 4. 计算机网络体系结构中的专业术语

术语来源于OSI体系结构,也适用于另外两个体系结构

### 1. 实体

1. 实体: 任何可发送或者接收信息的**硬件**或**软件进程**

2. 对等实体: 收发双方**相同层次**中的实体

   ![image-20220710172720135](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710172720135.png)

### 2. 协议

1. 协议: 控制两个对等实体进行**逻辑**通信的规则的集合

   ![image-20220710173024956](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710173024956.png)

- 这种通信其实并不存在,这是假设出来的一种通信,目的是 方便单独研究体系结构中的某一层,而不用考虑其他层
- 协议的三要素
  - 语法 : 定义所交换信息的格式,定义交换信息由哪些字段以及何种顺序构成
  - 语义 : 定义收发双方要完成的操作
  - 同步 : 定义收发双方的时序关系

### 3. 服务

- 在协议的控制下，两个对等实体间的逻辑通信使得**本层能够向上层提供服务**。

- 要实现本层协议，还需要使用下面一层所提供的服务。

- 协议是“水平的”，服务是“垂直的

- **实体看得见相邻下层所提供的服务，但并不知道实现该服务的具体协议**。也就是说，下面的协议对上面的实

  体是"透明"的。

  ![image-20220710175542713](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710175542713.png)

- 协议数据单元PDU : **对等层次之间传送的数据包**称为该层的协议数据单元
- 服务数据单元SDU  :同一系统内，**层与层之间交换的数据包**称为服务数据单元。
- 多个SDU可以合成为一一个PDU; 一个SDU也可划分为几个PDU。

![image-20220710180740786](D:\A.学习资料\A.笔记\19.计算机网络\计算机网络和因特网.assets\image-20220710180740786.png)



# 非对称加密

## 公钥和私钥	

##### 公钥加密私钥解密:加密通信

> 1. 服务端计算出一对秘钥pub/pri。将私钥保密，将公钥公开。
>
> 2. 客户端请求服务端时，拿到服务端的公钥pub。
>
> 3. 客户端通过AES计算出一个对称加密的秘钥X。 然后使用pub将X进行加密。
>
> 4. 客户端将加密后的密文发送给服务端。服务端通过pri解密获得X。
>
> 5. 然后两边的通讯内容就通过对称密钥X以对称加密算法来加解密。



`由于私钥和公钥互相可解，因此⾮对称加密还可以应⽤于数字签名技术。即用来证明发信息者的身份`

##### 私钥加密公钥解密:数字签名

> 传输时**私钥加密公钥解密可以用来验证身份**, 
>
> A 使用自己的私钥加密密文后得到签名,把密文连同签名发送给发送给 B, B使用A的公钥解密签名,对比解密结果和密文是否相同进行身份验证
>
> 被人没有 A 的私钥,也就无法伪造签名

##### 加密 + 签名

在实际的使用过程，常会对原数据hash以后对hash签名，然后附加在原数据的后⾯作为签名。

> 对原数据进行hash生成摘要,用私钥对摘要进行加密生成签名,将签名和原数据发送给接收方
>
> 接收方用相同hash对原数据生成摘要,用公钥对签名进行解密得到摘要,对比一致性



##### 数字证书

...
